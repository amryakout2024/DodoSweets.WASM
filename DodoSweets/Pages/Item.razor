@page "/item/{Name}"
@using DodoSweets.Models
@inject IStringLocalizer<AppResource> Loc

<MudContainer Class="mt-5">

    @if (cake == null)
    {
        <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
    }
    else
    {
        <MudCard Elevation="3">
            <MudCardHeader>
                <CardHeaderContent>
                    <MudText Typo="Typo.h4" Style="text-align:center">@Loc[@cake.Name]</MudText>
                </CardHeaderContent>
            </MudCardHeader>

            <MudCardMedia Image="@cake.Image" Style="background-size:contain;background-position:top;margin-bottom:30px" />

            <MudCardContent>
                <MudText Typo="Typo.body1">@Loc[@cake.Description]</MudText>
                <MudText Color="Color.Error" Typo="Typo.h6">
                    @cake.Price @Loc["le"]
                </MudText>

            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Text" Style="font-size:16px" Color="Color.Primary" href="/">@Loc["Backtolist"]</MudButton>
            </MudCardActions>
         </MudCard>
    }
</MudContainer>

    @code {

    [Parameter]
    public string? Name { get; set; }

    Cake cake = new();

    protected override void OnInitialized()
    {
        cake = Home.Cakes.Where(x => x.Name == Name).FirstOrDefault() ?? new Cake();
    }

    // protected override async Task<Cake> OnInitializedAsync()
    // {
    //     return Home.Cakes.Where(x => x.Name == Name).FirstOrDefault() ?? new Cake();
    // }
}
